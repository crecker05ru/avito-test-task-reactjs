(this["webpackJsonpavito-test-task"]=this["webpackJsonpavito-test-task"]||[]).push([[0],{62:function(e,t,n){},63:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(17),s=n.n(r),i=(n(62),n(63),n(16)),o=n(10),l=n.n(o),j=n(19),d=n(27),b=n(3),u=n(14),h=n.n(u),p="FETCH_START",O="FETCH_NEWS",x="FETCH_DONE",f="CLEAR_NEWS",m={news:[],loading:!1},g=n(98),v=n(96),w=n(15),k=n(50),y=n(2),N=function(){return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(g.a,{bg:"dark",variant:"dark",children:Object(y.jsx)(v.a,{children:Object(y.jsx)(g.a.Brand,{children:Object(y.jsxs)(w.Link,{to:"/",className:"text-decoration-none text-white",children:["Hacker News ",Object(y.jsx)(k.a,{})]})})})})})},C=n(8),T=n(99),E=n(97),F=n(57),S=n(31),H=n(54),_=n(22),R=n(36),L=n(26),A=n(35),M=n(53),D=n(52),B=n(51),I="FETCH_ANSWERS",W="CLEAR_ANSWERS",P="FETCH_START",U="FETCH_DONE",J={answers:[],loading:!1},q=function(e){var t=e.value,n=e.onComponentClick,c=e.id;return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(T.a,{variant:"link",className:"text-decoration-none",onClick:function(){n(t),console.log("answer c.kids value",t,"id",c)},children:"Load answers"})})},z=function(e){var t=e.kids,n=e.commentId,c=Object(i.c)((function(e){return e.answers})).answers,a=Object(i.b)();return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(q,{value:t,onComponentClick:function(e){a(function(e){return function(){var t=Object(j.a)(l.a.mark((function t(n){var c,a,r,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("fetchcommentstoanswers",e),t.prev=1,c=[],console.log("result answers",c),a=0;case 5:if(!(a<e.length)){t.next=14;break}return t.next=8,h.a.get("https://hacker-news.firebaseio.com/v0/item/".concat(e[a],".json?print=pretty"));case 8:r=t.sent,s=r.data,c.push(s);case 11:a++,t.next=5;break;case 14:n({type:I,payload:c}),n({type:U}),t.next=20;break;case 18:t.prev=18,t.t0=t.catch(1);case 20:case"end":return t.stop()}}),t,null,[[1,18]])})));return function(e){return t.apply(this,arguments)}}()}(e))},id:c.id}),console.log("kids",t),c.filter((function(e){return e.parent==n})).map((function(e){return Object(y.jsx)("div",{children:Object(y.jsx)(F.a,{border:"dark",style:{width:"40rem"},className:"ms-5 mt-2",children:Object(y.jsx)(F.a.Text,{children:Object(y.jsxs)("div",{children:[Object(y.jsx)(_.a,{}),e.by," ",Object(y.jsxs)("div",{children:["- ",e.text]})]})})})},e.id)}))]})},G="FETCH_COMMENTS",K="CLEAR_COMMENTS",Q="FETCH_START",V="FETCH_DONE",X={comments:[],loading:!1},Y=function(e){var t=e.news,n=t.url,a=t.title,r=t.time,s=t.by,o=t.kids,d=t.descendants,b=Object(i.c)((function(e){return e.comments})),u=b.comments,p=b.loading,O=Object(c.useState)(!1),x=Object(L.a)(O,2),f=x[0],m=x[1];console.log("comments",u);var g=Object(i.b)();console.log("Comments loading",p),console.log("kids article to answers",o);var v=function(){m(!f)};Object(c.useEffect)((function(){g(function(e){return function(){var t=Object(j.a)(l.a.mark((function t(n){var c,a,r,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("fetchcomments",e),t.prev=1,c=[],a=0;case 4:if(!(a<e.length)){t.next=13;break}return t.next=7,h.a.get("https://hacker-news.firebaseio.com/v0/item/".concat(e[a],".json?print=pretty"));case 7:r=t.sent,s=r.data,c.push(s);case 10:a++,t.next=4;break;case 13:e?(n({type:G,payload:c}),console.log("dispatch({type: FETCH_COMMENTS,payload: result})")):(n({type:V}),console.log("dispatch({type: FETCH_DONE})  ")),t.next=18;break;case 16:t.prev=16,t.t0=t.catch(1);case 18:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}(o))}),[]);return Object(y.jsx)(y.Fragment,{children:p?Object(y.jsx)(E.a,{animation:"border",role:"status"}):Object(y.jsxs)("div",{children:[Object(y.jsxs)(F.a,{children:[Object(y.jsxs)(F.a.Header,{as:"h5",children:[" ",Object(y.jsx)(B.a,{}),a]}),Object(y.jsxs)(F.a.Body,{children:[Object(y.jsxs)(F.a.Text,{children:[Object(y.jsx)(D.a,{})," ",n?Object(y.jsx)("a",{href:n,children:n}):"No URL"]}),Object(y.jsxs)(F.a.Text,{children:[Object(y.jsx)(M.a,{}),"Date: ",new Date(1e3*r).toString()]}),Object(y.jsxs)(F.a.Text,{className:"fst-italic",children:[Object(y.jsx)(_.a,{})," ",s]}),Object(y.jsxs)(F.a.Text,{children:[Object(y.jsx)(A.a,{})," ",0==d?Object(y.jsx)("div",{className:"fst-italic",children:"No comments"}):Object(y.jsxs)(y.Fragment,{children:[d,u.map((function(e){return Object(y.jsxs)("div",{className:"mt-2",children:[Object(y.jsx)(_.a,{}),"  ",e.by," ",Object(y.jsxs)("div",{className:"mt-1",children:["- ",e.text]}),e.kids?Object(y.jsxs)("p",{children:[Object(y.jsx)(z,{kids:e.kids,commentId:e.id}),f?Object(y.jsx)("div",{children:Object(y.jsx)(T.a,{variant:"link",className:"text-decoration-none",onClick:v,children:"Hide answers"})}):Object(y.jsx)(y.Fragment,{})]}):"No answers"]},e.id)})),Object(y.jsx)(C.d,{path:"/comments/:id?",exact:!0,children:Object(y.jsx)(z,{})})]})]})]})]}),Object(y.jsx)(T.a,{onClick:function(){g(function(e){return function(){var t=Object(j.a)(l.a.mark((function t(n){var c,a,r,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:Q}),console.log("fetchcomments kids",e),console.log("!kids",!e),e||(n({type:V}),console.log("dispatch({type: FETCH_DONE})  ")),t.prev=4,n({type:K}),c=[],console.log("result",c),a=0;case 9:if(!(a<e.length)){t.next=18;break}return t.next=12,h.a.get("https://hacker-news.firebaseio.com/v0/item/".concat(e[a],".json?print=pretty"));case 12:r=t.sent,s=r.data,c.push(s);case 15:a++,t.next=9;break;case 18:e.length>=1&&(n({type:G,payload:c}),console.log("dispatch({type: FETCH_COMMENTS,payload: result})")),t.next=23;break;case 21:t.prev=21,t.t0=t.catch(4);case 23:case"end":return t.stop()}}),t,null,[[4,21]])})));return function(e){return t.apply(this,arguments)}}()}(o))},children:"Update comments"}),Object(y.jsx)(T.a,{children:Object(y.jsx)(w.Link,{to:"/",className:"text-light text-decoration-none",children:"Back"})})]})})},Z=function(e){var t=e.news,n=e.ind,c=t.by,a=(t.descendants,t.id),r=t.score,s=t.time,i=t.title;t.type,t.url;return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(F.a,{className:"text-center",border:"dark",children:[Object(y.jsxs)(F.a.Header,{children:[n+1,"  ",Object(y.jsx)(S.a,{}),"   | Rating ",r," ",Object(y.jsx)(S.b,{})]}),Object(y.jsxs)(F.a.Body,{children:[Object(y.jsxs)(F.a.Title,{children:[Object(y.jsx)(H.a,{})," | ",Object(y.jsx)(w.Link,{to:"/article/".concat(a),className:"text-decoration-none",children:i})]}),Object(y.jsxs)(F.a.Text,{children:[Object(y.jsx)(_.a,{})," ",c]})]}),Object(y.jsxs)(F.a.Footer,{className:"text-muted",children:[" ",Object(y.jsx)(R.a,{})," ",new Date(1e3*s).toString()]})]})})},$=function(e){var t=e.news,n=e.loading,c=e.fetchNext,a=e.update;return console.log("news",t),console.log("MainPage loading",n),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{className:"d-grid gap-2",children:Object(y.jsx)(T.a,{onClick:a,variant:"outline-dark",children:"Update News"})}),t.map((function(e,t){return Object(y.jsx)(Z,{news:e,ind:t},e.id)})),console.log("news.length",t.length),n?Object(y.jsx)(E.a,{animation:"border",role:"status",children:Object(y.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):Object(y.jsx)("div",{className:"d-grid gap-2",children:Object(y.jsx)(T.a,{onClick:c,variant:"outline-dark",children:"Next"})})]})},ee=function(e){var t=e.news,n=(e.loading,Object(C.m)().id);return Object(y.jsx)(y.Fragment,{children:t.filter((function(e){return e.id==n}))?t.filter((function(e){return e.id==n})).map((function(e,t){return Object(y.jsx)(Y,{news:e,ind:t},n)})):Object(y.jsx)("h2",{children:"Nothing"})})},te=function(){return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(F.a.Footer,{bsPrefix:"card-footer",className:"footer mt-auto py-3 bg-dark text-light fst-italic text-center",children:"By Anvar"})})};var ne=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.news})),n=t.news,a=t.loading;return Object(c.useEffect)((function(){e(function(){var e=Object(j.a)(l.a.mark((function e(t){var n,c,a,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:p}),e.next=4,h.a.get("https://hacker-news.firebaseio.com/v0/newstories.json?print=pretty");case 4:n=e.sent,c=[],a=0;case 7:if(!(a<20)){e.next=16;break}return e.next=10,h.a.get("https://hacker-news.firebaseio.com/v0/item/".concat(n.data[a],".json?print=pretty"));case 10:r=e.sent,s=r.data,c.push(s);case 13:a++,e.next=7;break;case 16:t({type:O,payload:c}),t({type:x}),e.next=22;break;case 20:e.prev=20,e.t0=e.catch(0);case 22:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(y.jsxs)("div",{className:"App",children:[Object(y.jsx)(N,{}),Object(y.jsxs)(C.g,{children:[Object(y.jsx)(C.d,{path:"/",exact:!0,children:Object(y.jsx)($,{news:n,fetchNext:function(){var t;console.log("click"),e((t=n,function(){var e=Object(j.a)(l.a.mark((function e(n){var c,a,r,s,i,o,j;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:p}),e.next=4,h.a.get("https://hacker-news.firebaseio.com/v0/newstories.json?print=pretty");case 4:c=e.sent,a=[],r=t.length,s=r+20,i=r;case 9:if(!(i<s)){e.next=18;break}return e.next=12,h.a.get("https://hacker-news.firebaseio.com/v0/item/".concat(c.data[i],".json?print=pretty"));case 12:o=e.sent,j=o.data,a.push(j);case 15:i++,e.next=9;break;case 18:n({type:O,payload:a}),n({type:x}),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),console.log(e.t0);case 25:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t){return e.apply(this,arguments)}}()))},loading:a,update:function(){e(function(){var e=Object(j.a)(l.a.mark((function e(t){var n,c,a,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:f}),t({type:p}),e.next=5,h.a.get("https://hacker-news.firebaseio.com/v0/newstories.json?print=pretty");case 5:n=e.sent,console.log("data",n.data),c=[],a=0;case 9:if(!(a<10)){e.next=18;break}return e.next=12,h.a.get("https://hacker-news.firebaseio.com/v0/item/".concat(n.data[a],".json?print=pretty"));case 12:r=e.sent,s=r.data,c.push(s);case 15:a++,e.next=9;break;case 18:t({type:O,payload:c}),t({type:x}),e.next=24;break;case 22:e.prev=22,e.t0=e.catch(0);case 24:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t){return e.apply(this,arguments)}}())}})}),Object(y.jsx)(C.d,{path:"/article/:id?",exact:!0,children:Object(y.jsx)(ee,{news:n,loading:a})}),Object(y.jsx)(C.c,{to:"/"})]}),Object(y.jsx)(te,{})]})},ce=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,100)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))},ae=(n(93),n(55)),re=n(25),se="FETCH_ARTICLE",ie={article:[],loading:!1},oe=Object(re.combineReducers)({news:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(b.a)(Object(b.a)({},e),{},{loading:!0});case O:return Object(b.a)(Object(b.a)({},e),{},{news:[].concat(Object(d.a)(e.news),Object(d.a)(t.payload)),loading:!0});case x:return Object(b.a)(Object(b.a)({},e),{},{loading:!1});case f:return Object(b.a)(Object(b.a)({},e),{},{news:[]});default:return e}},article:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case se:return Object(b.a)(Object(b.a)({},e),{},{news:t.payload});default:return e}},comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return Object(b.a)(Object(b.a)({},e),{},{loading:!0});case K:return Object(b.a)(Object(b.a)({},e),{},{comments:[]});case G:return Object(b.a)(Object(b.a)({},e),{},{comments:t.payload,loading:!1});case V:return Object(b.a)(Object(b.a)({},e),{},{loading:!1});default:return e}},answers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(b.a)(Object(b.a)({},e),{},{loading:!0});case U:return Object(b.a)(Object(b.a)({},e),{},{loading:!1});case W:return Object(b.a)(Object(b.a)({},e),{},{answers:[]});case I:return Object(b.a)(Object(b.a)({},e),{},{answers:[].concat(Object(d.a)(e.answers),Object(d.a)(t.payload)),loading:!0});default:return e}}}),le=n(56),je=Object(re.createStore)(oe,Object(le.composeWithDevTools)(Object(re.applyMiddleware)(ae.a))),de=n(15).BrowserRouter;s.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(de,{children:Object(y.jsx)(i.a,{store:je,children:Object(y.jsx)(ne,{})})})}),document.getElementById("root")),ce()}},[[94,1,2]]]);
//# sourceMappingURL=main.a0570f2b.chunk.js.map