(this["webpackJsonpavito-test-task"]=this["webpackJsonpavito-test-task"]||[]).push([[0],{62:function(e,t,n){},63:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(16),r=n.n(s),i=(n(62),n(63),n(17)),o=n(10),l=n.n(o),j=n(19),d=n(26),b=n(3),u=n(14),O=n.n(u),h="FETCH_START",x="FETCH_NEWS",p="FETCH_DONE",m="CLEAR_NEWS",g={news:[],loading:!1},f=n(98),v=n(96),w=n(15),y=n(50),k=n(2),N=function(){return Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(f.a,{bg:"dark",variant:"dark",children:Object(k.jsx)(v.a,{children:Object(k.jsx)(f.a.Brand,{children:Object(k.jsxs)(w.Link,{to:"/",className:"text-decoration-none text-white",children:["Hacker News ",Object(k.jsx)(y.a,{})]})})})})})},T=n(8),E=n(99),C=n(97),F=n(57),S=n(31),H=n(54),_=n(22),R=n(36),A=n(25),L=n(35),M=n(53),D=n(52),B=n(51),W="FETCH_ANSWERS",P="CLEAR_ANSWERS",I="FETCH_START",U="FETCH_DONE",J={answers:[],loading:!1},q=function(e){var t=e.answers;return Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(F.a,{border:"dark",style:{width:"40rem"},className:"ms-5 mt-2",children:Object(k.jsx)(F.a.Text,{children:t.map((function(e){return Object(k.jsxs)("div",{children:[Object(k.jsx)(_.a,{}),e.by," ",Object(k.jsxs)("div",{children:["- ",e.text]})]},e.id)}))})})})},z="FETCH_COMMENTS",G="CLEAR_COMMENTS",K="FETCH_START",Q="FETCH_DONE",V={comments:[],loading:!1},X=function(e){var t=e.news,n=t.url,a=t.title,s=t.time,r=t.by,o=t.kids,d=t.descendants,b=Object(i.c)((function(e){return e.comments})),u=b.comments,h=b.loading,x=Object(i.c)((function(e){return e.answers})).answers,p=Object(c.useState)(!0),m=Object(A.a)(p,2),g=m[0],f=m[1];console.log("comments",u);var v=Object(i.b)();console.log("Comments loading",h),console.log("kids article to answers",o),console.log("answers in comments",x);var y=function(){f(!g)};console.log("showAnswers",g),Object(c.useEffect)((function(){v(function(e){return function(){var t=Object(j.a)(l.a.mark((function t(n){var c,a,s,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("fetchcomments",e),t.prev=1,c=[],a=0;case 4:if(!(a<e.length)){t.next=13;break}return t.next=7,O.a.get("https://hacker-news.firebaseio.com/v0/item/".concat(e[a],".json?print=pretty"));case 7:s=t.sent,r=s.data,c.push(r);case 10:a++,t.next=4;break;case 13:e?(n({type:z,payload:c}),console.log("dispatch({type: FETCH_COMMENTS,payload: result})")):(n({type:Q}),console.log("dispatch({type: FETCH_DONE})  ")),t.next=18;break;case 16:t.prev=16,t.t0=t.catch(1);case 18:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}(o))}),[]);return console.log("article n",t),Object(k.jsx)(k.Fragment,{children:h?Object(k.jsx)(C.a,{animation:"border",role:"status"}):Object(k.jsxs)("div",{children:[Object(k.jsxs)(F.a,{children:[Object(k.jsxs)(F.a.Header,{as:"h5",children:[" ",Object(k.jsx)(B.a,{}),a]}),Object(k.jsxs)(F.a.Body,{children:[Object(k.jsxs)(F.a.Text,{children:[Object(k.jsx)(D.a,{})," ",n?Object(k.jsx)("a",{href:n,children:n}):"No URL"]}),Object(k.jsxs)(F.a.Text,{children:[Object(k.jsx)(M.a,{}),"Date: ",new Date(1e3*s).toString()]}),Object(k.jsxs)(F.a.Text,{className:"fst-italic",children:[Object(k.jsx)(_.a,{})," ",r]}),Object(k.jsxs)(F.a.Text,{children:[Object(k.jsx)(L.a,{})," ",0==d?Object(k.jsx)("div",{className:"fst-italic",children:"No comments"}):Object(k.jsxs)(k.Fragment,{children:[d,u.map((function(e){return Object(k.jsxs)("div",{className:"mt-2",children:[Object(k.jsx)(_.a,{}),e.by," ",Object(k.jsxs)("div",{className:"mt-1",children:["- ",e.text]}),e.kids?Object(k.jsx)("p",{children:g?Object(k.jsxs)(k.Fragment,{children:["  ",Object(k.jsx)(E.a,{variant:"link",className:"text-decoration-none",onClick:y,children:"Load comments"})," "]}):Object(k.jsxs)("div",{children:[Object(k.jsx)(E.a,{variant:"link",className:"text-decoration-none",onClick:y,children:"Hide comments"}),Object(k.jsx)(q,{answers:x})]})}):"No answers"]},e.id)})),Object(k.jsx)(T.d,{path:"/comments/:id?",exact:!0,children:Object(k.jsx)(q,{})})]})]})]})]}),Object(k.jsx)(E.a,{onClick:function(){v(function(e){return function(){var t=Object(j.a)(l.a.mark((function t(n){var c,a,s,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:K}),console.log("fetchcomments kids",e),console.log("!kids",!e),e||(n({type:Q}),console.log("dispatch({type: FETCH_DONE})  ")),t.prev=4,n({type:G}),c=[],console.log("result",c),a=0;case 9:if(!(a<e.length)){t.next=18;break}return t.next=12,O.a.get("https://hacker-news.firebaseio.com/v0/item/".concat(e[a],".json?print=pretty"));case 12:s=t.sent,r=s.data,c.push(r);case 15:a++,t.next=9;break;case 18:e.length>=1&&(n({type:z,payload:c}),console.log("dispatch({type: FETCH_COMMENTS,payload: result})")),t.next=23;break;case 21:t.prev=21,t.t0=t.catch(4);case 23:case"end":return t.stop()}}),t,null,[[4,21]])})));return function(e){return t.apply(this,arguments)}}()}(o)),console.log("click")},children:"Update comments"}),Object(k.jsx)(E.a,{children:Object(k.jsx)(w.Link,{to:"/",className:"text-light text-decoration-none",children:"Back"})})]})})},Y=function(e){var t=e.news,n=e.ind,c=t.by,a=(t.descendants,t.id),s=t.score,r=t.time,i=t.title;t.type,t.url;return console.log(n,"ind"),console.log(t),Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(F.a,{className:"text-center",border:"dark",children:[Object(k.jsxs)(F.a.Header,{children:[n+1,"  ",Object(k.jsx)(S.a,{}),"   | Rating ",s," ",Object(k.jsx)(S.b,{})]}),Object(k.jsxs)(F.a.Body,{children:[Object(k.jsxs)(F.a.Title,{children:[Object(k.jsx)(H.a,{})," | ",Object(k.jsx)(w.Link,{to:"/article/".concat(a),className:"text-decoration-none",children:i})]}),Object(k.jsxs)(F.a.Text,{children:[Object(k.jsx)(_.a,{})," ",c]})]}),Object(k.jsxs)(F.a.Footer,{className:"text-muted",children:[" ",Object(k.jsx)(R.a,{})," ",new Date(1e3*r).toString()]})]})})},Z=function(e){var t=e.news,n=e.loading,c=e.fetchNext,a=e.update;return console.log("news",t),console.log("MainPage loading",n),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{className:"d-grid gap-2",children:Object(k.jsx)(E.a,{onClick:a,variant:"outline-dark",children:"Update News"})}),t.map((function(e,t){return Object(k.jsx)(Y,{news:e,ind:t},e.id)})),console.log("news.length",t.length),n?Object(k.jsx)(C.a,{animation:"border",role:"status",children:Object(k.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):Object(k.jsx)("div",{className:"d-grid gap-2",children:Object(k.jsx)(E.a,{onClick:c,variant:"outline-dark",children:"Next"})})]})},$=function(e){var t=e.news,n=(e.loading,Object(T.m)().id);return Object(k.jsx)(k.Fragment,{children:t.filter((function(e){return e.id==n}))?t.filter((function(e){return e.id==n})).map((function(e,t){return Object(k.jsx)(X,{news:e,ind:t},n)})):Object(k.jsx)("h2",{children:"Nothing"})})},ee=function(){return Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(F.a.Footer,{bsPrefix:"card-footer",className:"footer mt-auto py-3 bg-dark text-light fst-italic text-center",children:"By Anvar"})})};var te=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.news})),n=t.news,a=t.loading;return Object(c.useEffect)((function(){e(function(){var e=Object(j.a)(l.a.mark((function e(t){var n,c,a,s,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:h}),e.next=4,O.a.get("https://hacker-news.firebaseio.com/v0/newstories.json?print=pretty");case 4:n=e.sent,c=[],a=0;case 7:if(!(a<20)){e.next=16;break}return e.next=10,O.a.get("https://hacker-news.firebaseio.com/v0/item/".concat(n.data[a],".json?print=pretty"));case 10:s=e.sent,r=s.data,c.push(r);case 13:a++,e.next=7;break;case 16:t({type:x,payload:c}),t({type:p}),e.next=22;break;case 20:e.prev=20,e.t0=e.catch(0);case 22:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(k.jsxs)("div",{className:"App",children:[Object(k.jsx)(N,{}),Object(k.jsxs)(T.g,{children:[Object(k.jsx)(T.d,{path:"/",exact:!0,children:Object(k.jsx)(Z,{news:n,fetchNext:function(){var t;console.log("click"),e((t=n,function(){var e=Object(j.a)(l.a.mark((function e(n){var c,a,s,r,i,o,j;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:h}),e.next=4,O.a.get("https://hacker-news.firebaseio.com/v0/newstories.json?print=pretty");case 4:c=e.sent,a=[],s=t.length,r=s+20,i=s;case 9:if(!(i<r)){e.next=18;break}return e.next=12,O.a.get("https://hacker-news.firebaseio.com/v0/item/".concat(c.data[i],".json?print=pretty"));case 12:o=e.sent,j=o.data,a.push(j);case 15:i++,e.next=9;break;case 18:n({type:x,payload:a}),n({type:p}),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),console.log(e.t0);case 25:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t){return e.apply(this,arguments)}}()))},loading:a,update:function(){e(function(){var e=Object(j.a)(l.a.mark((function e(t){var n,c,a,s,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:m}),t({type:h}),e.next=5,O.a.get("https://hacker-news.firebaseio.com/v0/newstories.json?print=pretty");case 5:n=e.sent,console.log("data",n.data),c=[],a=0;case 9:if(!(a<10)){e.next=18;break}return e.next=12,O.a.get("https://hacker-news.firebaseio.com/v0/item/".concat(n.data[a],".json?print=pretty"));case 12:s=e.sent,r=s.data,c.push(r);case 15:a++,e.next=9;break;case 18:t({type:x,payload:c}),t({type:p}),e.next=24;break;case 22:e.prev=22,e.t0=e.catch(0);case 24:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t){return e.apply(this,arguments)}}())}})}),Object(k.jsx)(T.d,{path:"/article/:id?",exact:!0,children:Object(k.jsx)($,{news:n,loading:a})}),Object(k.jsx)(T.c,{to:"/"})]}),Object(k.jsx)(ee,{})]})},ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,100)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),s(e),r(e)}))},ce=(n(93),n(55)),ae=n(24),se="FETCH_ARTICLE",re={article:[],loading:!1},ie=Object(ae.combineReducers)({news:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(b.a)(Object(b.a)({},e),{},{loading:!0});case x:return Object(b.a)(Object(b.a)({},e),{},{news:[].concat(Object(d.a)(e.news),Object(d.a)(t.payload)),loading:!0});case p:return Object(b.a)(Object(b.a)({},e),{},{loading:!1});case m:return Object(b.a)(Object(b.a)({},e),{},{news:[]});default:return e}},article:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case se:return Object(b.a)(Object(b.a)({},e),{},{news:t.payload});default:return e}},comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K:return Object(b.a)(Object(b.a)({},e),{},{loading:!0});case G:return Object(b.a)(Object(b.a)({},e),{},{comments:[]});case z:return Object(b.a)(Object(b.a)({},e),{},{comments:t.payload,loading:!1});case Q:return Object(b.a)(Object(b.a)({},e),{},{loading:!1});default:return e}},answers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(b.a)(Object(b.a)({},e),{},{loading:!0});case U:return Object(b.a)(Object(b.a)({},e),{},{loading:!1});case P:return Object(b.a)(Object(b.a)({},e),{},{answers:[]});case W:return Object(b.a)(Object(b.a)({},e),{},{comments:[].concat(Object(d.a)(e.answers),Object(d.a)(t.payload)),loading:!0});default:return e}}}),oe=n(56),le=Object(ae.createStore)(ie,Object(oe.composeWithDevTools)(Object(ae.applyMiddleware)(ce.a))),je=n(15).BrowserRouter;r.a.render(Object(k.jsx)(a.a.StrictMode,{children:Object(k.jsx)(je,{children:Object(k.jsx)(i.a,{store:le,children:Object(k.jsx)(te,{})})})}),document.getElementById("root")),ne()}},[[94,1,2]]]);
//# sourceMappingURL=main.0f57f746.chunk.js.map